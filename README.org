#+title: Migrate to Rocky Linux

Have CentOS 8 Hosts?

Approaching CentOS 8 End of Life (2022)?

This policy migrates your hosts to Rocky Linux using the [[https://github.com/rocky-linux/rocky-tools/tree/main/migrate2rocky][~migrate2rocky.sh~ script from the rocky-tools repository]].

Note: This policy uses the custom [[https://github.com/cfengine/modules/tree/master/promise_types/git][/git/ promise type]]. You will need to install that first. Also note, [[https://github.com/cfengine/cfbs][~cfbs~]] makes managing  your policy and dependencies.


* Example installation with cfbs

#+begin_example
  [root@localhost ~]# cat /etc/os-release
  NAME="CentOS Linux"
  VERSION="8"
  ID="centos"
  ID_LIKE="rhel fedora"
  VERSION_ID="8"
  PLATFORM_ID="platform:el8"
  PRETTY_NAME="CentOS Linux 8"
  ANSI_COLOR="0;31"
  CPE_NAME="cpe:/o:centos:centos:8"
  HOME_URL="https://centos.org/"
  BUG_REPORT_URL="https://bugs.centos.org/"
  CENTOS_MANTISBT_PROJECT="CentOS-8"
  CENTOS_MANTISBT_PROJECT_VERSION="8"
  [root@localhost ~]# yum -y install python3-pip git automake
  Last metadata expiration check: 0:00:29 ago on Tue 14 Sep 2021 05:57:23 PM UTC.
  Dependencies resolved.
  =============================================================================================================================================================================
   Package                                     Architecture                Version                                                        Repository                      Size
  =============================================================================================================================================================================
  Installing:
   automake                                    noarch                      1.16.1-7.el8                                                   appstream                      713 k
   git                                         x86_64                      2.27.0-1.el8                                                   appstream                      164 k
   python3-pip                                 noarch                      9.0.3-19.el8                                                   appstream                       20 k
  Upgrading:
   platform-python-pip                         noarch                      9.0.3-19.el8                                                   baseos                         1.7 M
  Installing dependencies:
   autoconf                                    noarch                      2.69-27.el8                                                    appstream                      710 k
   emacs-filesystem                            noarch                      1:26.1-5.el8                                                   baseos                          69 k
   git-core                                    x86_64                      2.27.0-1.el8                                                   appstream                      5.7 M
   git-core-doc                                noarch                      2.27.0-1.el8                                                   appstream                      2.5 M
   m4                                          x86_64                      1.4.18-7.el8                                                   baseos                         223 k
   perl-Carp                                   noarch                      1.42-396.el8                                                   baseos                          30 k
   perl-Data-Dumper                            x86_64                      2.167-399.el8                                                  baseos                          58 k
   perl-Digest                                 noarch                      1.17-395.el8                                                   appstream                       27 k
   perl-Digest-MD5                             x86_64                      2.55-396.el8                                                   appstream                       37 k
   perl-Encode                                 x86_64                      4:2.97-3.el8                                                   baseos                         1.5 M
   perl-Errno                                  x86_64                      1.28-419.el8_4.1                                               baseos                          76 k
   perl-Error                                  noarch                      1:0.17025-2.el8                                                appstream                       46 k
   perl-Exporter                               noarch                      5.72-396.el8                                                   baseos                          34 k
   perl-File-Path                              noarch                      2.15-2.el8                                                     baseos                          38 k
   perl-File-Temp                              noarch                      0.230.600-1.el8                                                baseos                          63 k
   perl-Getopt-Long                            noarch                      1:2.50-4.el8                                                   baseos                          63 k
   perl-Git                                    noarch                      2.27.0-1.el8                                                   appstream                       77 k
   perl-HTTP-Tiny                              noarch                      0.074-1.el8                                                    baseos                          58 k
   perl-IO                                     x86_64                      1.38-419.el8_4.1                                               baseos                         142 k
   perl-MIME-Base64                            x86_64                      3.15-396.el8                                                   baseos                          31 k
   perl-Net-SSLeay                             x86_64                      1.88-1.module_el8.3.0+410+ff426aa3                             appstream                      379 k
   perl-PathTools                              x86_64                      3.74-1.el8                                                     baseos                          90 k
   perl-Pod-Escapes                            noarch                      1:1.07-395.el8                                                 baseos                          20 k
   perl-Pod-Perldoc                            noarch                      3.28-396.el8                                                   baseos                          86 k
   perl-Pod-Simple                             noarch                      1:3.35-395.el8                                                 baseos                         213 k
   perl-Pod-Usage                              noarch                      4:1.69-395.el8                                                 baseos                          34 k
   perl-Scalar-List-Utils                      x86_64                      3:1.49-2.el8                                                   baseos                          68 k
   perl-Socket                                 x86_64                      4:2.027-3.el8                                                  baseos                          59 k
   perl-Storable                               x86_64                      1:3.11-3.el8                                                   baseos                          98 k
   perl-Term-ANSIColor                         noarch                      4.06-396.el8                                                   baseos                          46 k
   perl-Term-Cap                               noarch                      1.17-395.el8                                                   baseos                          23 k
   perl-TermReadKey                            x86_64                      2.37-7.el8                                                     appstream                       40 k
   perl-Text-ParseWords                        noarch                      3.30-395.el8                                                   baseos                          18 k
   perl-Text-Tabs+Wrap                         noarch                      2013.0523-395.el8                                              baseos                          24 k
   perl-Thread-Queue                           noarch                      3.13-1.el8                                                     appstream                       24 k
   perl-Time-Local                             noarch                      1:1.280-1.el8                                                  baseos                          34 k
   perl-URI                                    noarch                      1.73-3.el8                                                     appstream                      116 k
   perl-Unicode-Normalize                      x86_64                      1.25-396.el8                                                   baseos                          82 k
   perl-constant                               noarch                      1.33-396.el8                                                   baseos                          25 k
   perl-interpreter                            x86_64                      4:5.26.3-419.el8_4.1                                           baseos                         6.3 M
   perl-libnet                                 noarch                      3.11-3.el8                                                     appstream                      121 k
   perl-libs                                   x86_64                      4:5.26.3-419.el8_4.1                                           baseos                         1.6 M
   perl-macros                                 x86_64                      4:5.26.3-419.el8_4.1                                           baseos                          72 k
   perl-parent                                 noarch                      1:0.237-1.el8                                                  baseos                          20 k
   perl-podlators                              noarch                      4.11-1.el8                                                     baseos                         118 k
   perl-threads                                x86_64                      1:2.21-2.el8                                                   baseos                          61 k
   perl-threads-shared                         x86_64                      1.58-2.el8                                                     baseos                          48 k
   python3-setuptools                          noarch                      39.2.0-6.el8                                                   baseos                         163 k
   python36                                    x86_64                      3.6.8-2.module_el8.4.0+790+083e3d81                            appstream                       19 k
  Installing weak dependencies:
   perl-IO-Socket-IP                           noarch                      0.39-5.el8                                                     appstream                       47 k
   perl-IO-Socket-SSL                          noarch                      2.066-4.module_el8.3.0+410+ff426aa3                            appstream                      298 k
   perl-Mozilla-CA                             noarch                      20160104-7.module_el8.3.0+416+dee7bcef                         appstream                       15 k
  Enabling module streams:
   perl                                                                    5.26
   perl-IO-Socket-SSL                                                      2.066
   perl-libwww-perl                                                        6.34
   python36                                                                3.6

  Transaction Summary
  =============================================================================================================================================================================
  Install  55 Packages
  Upgrade   1 Package

  Total download size: 24 M
  Downloading Packages:
  (1/56): git-2.27.0-1.el8.x86_64.rpm                                                                                                          568 kB/s | 164 kB     00:00
  (2/56): automake-1.16.1-7.el8.noarch.rpm                                                                                                     1.7 MB/s | 713 kB     00:00
  (3/56): autoconf-2.69-27.el8.noarch.rpm                                                                                                      1.7 MB/s | 710 kB     00:00
  (4/56): perl-Digest-1.17-395.el8.noarch.rpm                                                                                                  457 kB/s |  27 kB     00:00
  (5/56): perl-Digest-MD5-2.55-396.el8.x86_64.rpm                                                                                              698 kB/s |  37 kB     00:00
  (6/56): perl-Error-0.17025-2.el8.noarch.rpm                                                                                                  747 kB/s |  46 kB     00:00
  (7/56): perl-Git-2.27.0-1.el8.noarch.rpm                                                                                                     1.3 MB/s |  77 kB     00:00
  (8/56): perl-IO-Socket-IP-0.39-5.el8.noarch.rpm                                                                                              791 kB/s |  47 kB     00:00
  (9/56): perl-IO-Socket-SSL-2.066-4.module_el8.3.0+410+ff426aa3.noarch.rpm                                                                    2.6 MB/s | 298 kB     00:00
  (10/56): git-core-doc-2.27.0-1.el8.noarch.rpm                                                                                                5.2 MB/s | 2.5 MB     00:00
  (11/56): perl-Mozilla-CA-20160104-7.module_el8.3.0+416+dee7bcef.noarch.rpm                                                                   221 kB/s |  15 kB     00:00
  (12/56): perl-TermReadKey-2.37-7.el8.x86_64.rpm                                                                                              653 kB/s |  40 kB     00:00
  (13/56): perl-Thread-Queue-3.13-1.el8.noarch.rpm                                                                                             484 kB/s |  24 kB     00:00
  (14/56): perl-Net-SSLeay-1.88-1.module_el8.3.0+410+ff426aa3.x86_64.rpm                                                                       3.0 MB/s | 379 kB     00:00
  (15/56): perl-URI-1.73-3.el8.noarch.rpm                                                                                                      1.8 MB/s | 116 kB     00:00
  (16/56): perl-libnet-3.11-3.el8.noarch.rpm                                                                                                   1.7 MB/s | 121 kB     00:00
  (17/56): python3-pip-9.0.3-19.el8.noarch.rpm                                                                                                 434 kB/s |  20 kB     00:00
  (18/56): python36-3.6.8-2.module_el8.4.0+790+083e3d81.x86_64.rpm                                                                             420 kB/s |  19 kB     00:00
  (19/56): git-core-2.27.0-1.el8.x86_64.rpm                                                                                                    6.3 MB/s | 5.7 MB     00:00
  (20/56): emacs-filesystem-26.1-5.el8.noarch.rpm                                                                                              598 kB/s |  69 kB     00:00
  (21/56): perl-Carp-1.42-396.el8.noarch.rpm                                                                                                   351 kB/s |  30 kB     00:00
  (22/56): perl-Data-Dumper-2.167-399.el8.x86_64.rpm                                                                                           1.2 MB/s |  58 kB     00:00
  (23/56): m4-1.4.18-7.el8.x86_64.rpm                                                                                                          1.3 MB/s | 223 kB     00:00
  (24/56): perl-Errno-1.28-419.el8_4.1.x86_64.rpm                                                                                              1.8 MB/s |  76 kB     00:00
  (25/56): perl-Exporter-5.72-396.el8.noarch.rpm                                                                                               1.1 MB/s |  34 kB     00:00
  (26/56): perl-File-Path-2.15-2.el8.noarch.rpm                                                                                                848 kB/s |  38 kB     00:00
  (27/56): perl-File-Temp-0.230.600-1.el8.noarch.rpm                                                                                           1.6 MB/s |  63 kB     00:00
  (28/56): perl-Getopt-Long-2.50-4.el8.noarch.rpm                                                                                              1.2 MB/s |  63 kB     00:00
  (29/56): perl-HTTP-Tiny-0.074-1.el8.noarch.rpm                                                                                               1.2 MB/s |  58 kB     00:00
  (30/56): perl-MIME-Base64-3.15-396.el8.x86_64.rpm                                                                                            642 kB/s |  31 kB     00:00
  (31/56): perl-IO-1.38-419.el8_4.1.x86_64.rpm                                                                                                 2.2 MB/s | 142 kB     00:00
  (32/56): perl-Encode-2.97-3.el8.x86_64.rpm                                                                                                   6.5 MB/s | 1.5 MB     00:00
  (33/56): perl-PathTools-3.74-1.el8.x86_64.rpm                                                                                                2.4 MB/s |  90 kB     00:00
  (34/56): perl-Pod-Escapes-1.07-395.el8.noarch.rpm                                                                                            769 kB/s |  20 kB     00:00
  (35/56): perl-Pod-Perldoc-3.28-396.el8.noarch.rpm                                                                                            2.2 MB/s |  86 kB     00:00
  (36/56): perl-Pod-Usage-1.69-395.el8.noarch.rpm                                                                                              896 kB/s |  34 kB     00:00
  (37/56): perl-Pod-Simple-3.35-395.el8.noarch.rpm                                                                                             4.2 MB/s | 213 kB     00:00
  (38/56): perl-Scalar-List-Utils-1.49-2.el8.x86_64.rpm                                                                                        1.9 MB/s |  68 kB     00:00
  (39/56): perl-Socket-2.027-3.el8.x86_64.rpm                                                                                                  1.8 MB/s |  59 kB     00:00
  (40/56): perl-Storable-3.11-3.el8.x86_64.rpm                                                                                                 2.8 MB/s |  98 kB     00:00
  (41/56): perl-Term-Cap-1.17-395.el8.noarch.rpm                                                                                               903 kB/s |  23 kB     00:00
  (42/56): perl-Term-ANSIColor-4.06-396.el8.noarch.rpm                                                                                         1.7 MB/s |  46 kB     00:00
  (43/56): perl-Text-ParseWords-3.30-395.el8.noarch.rpm                                                                                        635 kB/s |  18 kB     00:00
  (44/56): perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch.rpm                                                                                    952 kB/s |  24 kB     00:00
  (45/56): perl-Time-Local-1.280-1.el8.noarch.rpm                                                                                              1.1 MB/s |  34 kB     00:00
  (46/56): perl-Unicode-Normalize-1.25-396.el8.x86_64.rpm                                                                                      2.4 MB/s |  82 kB     00:00
  (47/56): perl-constant-1.33-396.el8.noarch.rpm                                                                                               922 kB/s |  25 kB     00:00
  (48/56): perl-macros-5.26.3-419.el8_4.1.x86_64.rpm                                                                                           1.2 MB/s |  72 kB     00:00
  (49/56): perl-parent-0.237-1.el8.noarch.rpm                                                                                                  630 kB/s |  20 kB     00:00
  (50/56): perl-podlators-4.11-1.el8.noarch.rpm                                                                                                2.0 MB/s | 118 kB     00:00
  (51/56): perl-threads-2.21-2.el8.x86_64.rpm                                                                                                  1.7 MB/s |  61 kB     00:00
  (52/56): perl-threads-shared-1.58-2.el8.x86_64.rpm                                                                                           1.3 MB/s |  48 kB     00:00
  (53/56): perl-libs-5.26.3-419.el8_4.1.x86_64.rpm                                                                                             5.5 MB/s | 1.6 MB     00:00
  (54/56): python3-setuptools-39.2.0-6.el8.noarch.rpm                                                                                          2.7 MB/s | 163 kB     00:00
  (55/56): platform-python-pip-9.0.3-19.el8.noarch.rpm                                                                                         6.4 MB/s | 1.7 MB     00:00
  (56/56): perl-interpreter-5.26.3-419.el8_4.1.x86_64.rpm                                                                                      6.0 MB/s | 6.3 MB     00:01
  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Total                                                                                                                                        7.7 MB/s |  24 MB     00:03
  warning: /var/cache/dnf/appstream-fd636d66ef3d60cc/packages/autoconf-2.69-27.el8.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEY
  CentOS Linux 8 - AppStream                                                                                                                   1.5 MB/s | 1.6 kB     00:00
  Importing GPG key 0x8483C65D:
   Userid     : "CentOS (CentOS Official Signing Key) <security@centos.org>"
   Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D
   From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
  Key imported successfully
  Running transaction check
  Transaction check succeeded.
  Running transaction test
  Transaction test succeeded.
  Running transaction
    Preparing        :                                                                                                                                                     1/1
    Installing       : emacs-filesystem-1:26.1-5.el8.noarch                                                                                                               1/57
    Installing       : git-core-2.27.0-1.el8.x86_64                                                                                                                       2/57
    Installing       : git-core-doc-2.27.0-1.el8.noarch                                                                                                                   3/57
    Installing       : perl-Digest-1.17-395.el8.noarch                                                                                                                    4/57
    Installing       : perl-Digest-MD5-2.55-396.el8.x86_64                                                                                                                5/57
    Installing       : perl-Data-Dumper-2.167-399.el8.x86_64                                                                                                              6/57
    Installing       : perl-libnet-3.11-3.el8.noarch                                                                                                                      7/57
    Installing       : perl-Net-SSLeay-1.88-1.module_el8.3.0+410+ff426aa3.x86_64                                                                                          8/57
    Installing       : perl-URI-1.73-3.el8.noarch                                                                                                                         9/57
    Installing       : perl-Pod-Escapes-1:1.07-395.el8.noarch                                                                                                            10/57
    Installing       : perl-Mozilla-CA-20160104-7.module_el8.3.0+416+dee7bcef.noarch                                                                                     11/57
    Installing       : perl-IO-Socket-IP-0.39-5.el8.noarch                                                                                                               12/57
    Installing       : perl-Time-Local-1:1.280-1.el8.noarch                                                                                                              13/57
    Installing       : perl-IO-Socket-SSL-2.066-4.module_el8.3.0+410+ff426aa3.noarch                                                                                     14/57
    Installing       : perl-Term-ANSIColor-4.06-396.el8.noarch                                                                                                           15/57
    Installing       : perl-Term-Cap-1.17-395.el8.noarch                                                                                                                 16/57
    Installing       : perl-File-Temp-0.230.600-1.el8.noarch                                                                                                             17/57
    Installing       : perl-Pod-Simple-1:3.35-395.el8.noarch                                                                                                             18/57
    Installing       : perl-HTTP-Tiny-0.074-1.el8.noarch                                                                                                                 19/57
    Installing       : perl-podlators-4.11-1.el8.noarch                                                                                                                  20/57
    Installing       : perl-Pod-Perldoc-3.28-396.el8.noarch                                                                                                              21/57
    Installing       : perl-Text-ParseWords-3.30-395.el8.noarch                                                                                                          22/57
    Installing       : perl-Pod-Usage-4:1.69-395.el8.noarch                                                                                                              23/57
    Installing       : perl-MIME-Base64-3.15-396.el8.x86_64                                                                                                              24/57
    Installing       : perl-Storable-1:3.11-3.el8.x86_64                                                                                                                 25/57
    Installing       : perl-Getopt-Long-1:2.50-4.el8.noarch                                                                                                              26/57
    Installing       : perl-Errno-1.28-419.el8_4.1.x86_64                                                                                                                27/57
    Installing       : perl-Socket-4:2.027-3.el8.x86_64                                                                                                                  28/57
    Installing       : perl-Encode-4:2.97-3.el8.x86_64                                                                                                                   29/57
    Installing       : perl-Carp-1.42-396.el8.noarch                                                                                                                     30/57
    Installing       : perl-Exporter-5.72-396.el8.noarch                                                                                                                 31/57
    Installing       : perl-libs-4:5.26.3-419.el8_4.1.x86_64                                                                                                             32/57
    Installing       : perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                                                                                                        33/57
    Installing       : perl-parent-1:0.237-1.el8.noarch                                                                                                                  34/57
    Installing       : perl-macros-4:5.26.3-419.el8_4.1.x86_64                                                                                                           35/57
    Installing       : perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                                                                                                      36/57
    Installing       : perl-Unicode-Normalize-1.25-396.el8.x86_64                                                                                                        37/57
    Installing       : perl-File-Path-2.15-2.el8.noarch                                                                                                                  38/57
    Installing       : perl-IO-1.38-419.el8_4.1.x86_64                                                                                                                   39/57
    Installing       : perl-PathTools-3.74-1.el8.x86_64                                                                                                                  40/57
    Installing       : perl-constant-1.33-396.el8.noarch                                                                                                                 41/57
    Installing       : perl-threads-1:2.21-2.el8.x86_64                                                                                                                  42/57
    Installing       : perl-threads-shared-1.58-2.el8.x86_64                                                                                                             43/57
    Installing       : perl-interpreter-4:5.26.3-419.el8_4.1.x86_64                                                                                                      44/57
    Installing       : perl-Error-1:0.17025-2.el8.noarch                                                                                                                 45/57
    Installing       : perl-TermReadKey-2.37-7.el8.x86_64                                                                                                                46/57
    Installing       : perl-Git-2.27.0-1.el8.noarch                                                                                                                      47/57
    Installing       : git-2.27.0-1.el8.x86_64                                                                                                                           48/57
    Installing       : perl-Thread-Queue-3.13-1.el8.noarch                                                                                                               49/57
    Upgrading        : platform-python-pip-9.0.3-19.el8.noarch                                                                                                           50/57
    Installing       : python3-setuptools-39.2.0-6.el8.noarch                                                                                                            51/57
    Installing       : python36-3.6.8-2.module_el8.4.0+790+083e3d81.x86_64                                                                                               52/57
    Running scriptlet: python36-3.6.8-2.module_el8.4.0+790+083e3d81.x86_64                                                                                               52/57
    Installing       : python3-pip-9.0.3-19.el8.noarch                                                                                                                   53/57
    Installing       : m4-1.4.18-7.el8.x86_64                                                                                                                            54/57
    Running scriptlet: m4-1.4.18-7.el8.x86_64                                                                                                                            54/57
    Installing       : autoconf-2.69-27.el8.noarch                                                                                                                       55/57
    Running scriptlet: autoconf-2.69-27.el8.noarch                                                                                                                       55/57
    Installing       : automake-1.16.1-7.el8.noarch                                                                                                                      56/57
    Cleanup          : platform-python-pip-9.0.3-18.el8.noarch                                                                                                           57/57
    Running scriptlet: platform-python-pip-9.0.3-18.el8.noarch                                                                                                           57/57
    Verifying        : autoconf-2.69-27.el8.noarch                                                                                                                        1/57
    Verifying        : automake-1.16.1-7.el8.noarch                                                                                                                       2/57
    Verifying        : git-2.27.0-1.el8.x86_64                                                                                                                            3/57
    Verifying        : git-core-2.27.0-1.el8.x86_64                                                                                                                       4/57
    Verifying        : git-core-doc-2.27.0-1.el8.noarch                                                                                                                   5/57
    Verifying        : perl-Digest-1.17-395.el8.noarch                                                                                                                    6/57
    Verifying        : perl-Digest-MD5-2.55-396.el8.x86_64                                                                                                                7/57
    Verifying        : perl-Error-1:0.17025-2.el8.noarch                                                                                                                  8/57
    Verifying        : perl-Git-2.27.0-1.el8.noarch                                                                                                                       9/57
    Verifying        : perl-IO-Socket-IP-0.39-5.el8.noarch                                                                                                               10/57
    Verifying        : perl-IO-Socket-SSL-2.066-4.module_el8.3.0+410+ff426aa3.noarch                                                                                     11/57
    Verifying        : perl-Mozilla-CA-20160104-7.module_el8.3.0+416+dee7bcef.noarch                                                                                     12/57
    Verifying        : perl-Net-SSLeay-1.88-1.module_el8.3.0+410+ff426aa3.x86_64                                                                                         13/57
    Verifying        : perl-TermReadKey-2.37-7.el8.x86_64                                                                                                                14/57
    Verifying        : perl-Thread-Queue-3.13-1.el8.noarch                                                                                                               15/57
    Verifying        : perl-URI-1.73-3.el8.noarch                                                                                                                        16/57
    Verifying        : perl-libnet-3.11-3.el8.noarch                                                                                                                     17/57
    Verifying        : python3-pip-9.0.3-19.el8.noarch                                                                                                                   18/57
    Verifying        : python36-3.6.8-2.module_el8.4.0+790+083e3d81.x86_64                                                                                               19/57
    Verifying        : emacs-filesystem-1:26.1-5.el8.noarch                                                                                                              20/57
    Verifying        : m4-1.4.18-7.el8.x86_64                                                                                                                            21/57
    Verifying        : perl-Carp-1.42-396.el8.noarch                                                                                                                     22/57
    Verifying        : perl-Data-Dumper-2.167-399.el8.x86_64                                                                                                             23/57
    Verifying        : perl-Encode-4:2.97-3.el8.x86_64                                                                                                                   24/57
    Verifying        : perl-Errno-1.28-419.el8_4.1.x86_64                                                                                                                25/57
    Verifying        : perl-Exporter-5.72-396.el8.noarch                                                                                                                 26/57
    Verifying        : perl-File-Path-2.15-2.el8.noarch                                                                                                                  27/57
    Verifying        : perl-File-Temp-0.230.600-1.el8.noarch                                                                                                             28/57
    Verifying        : perl-Getopt-Long-1:2.50-4.el8.noarch                                                                                                              29/57
    Verifying        : perl-HTTP-Tiny-0.074-1.el8.noarch                                                                                                                 30/57
    Verifying        : perl-IO-1.38-419.el8_4.1.x86_64                                                                                                                   31/57
    Verifying        : perl-MIME-Base64-3.15-396.el8.x86_64                                                                                                              32/57
    Verifying        : perl-PathTools-3.74-1.el8.x86_64                                                                                                                  33/57
    Verifying        : perl-Pod-Escapes-1:1.07-395.el8.noarch                                                                                                            34/57
    Verifying        : perl-Pod-Perldoc-3.28-396.el8.noarch                                                                                                              35/57
    Verifying        : perl-Pod-Simple-1:3.35-395.el8.noarch                                                                                                             36/57
    Verifying        : perl-Pod-Usage-4:1.69-395.el8.noarch                                                                                                              37/57
    Verifying        : perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                                                                                                        38/57
    Verifying        : perl-Socket-4:2.027-3.el8.x86_64                                                                                                                  39/57
    Verifying        : perl-Storable-1:3.11-3.el8.x86_64                                                                                                                 40/57
    Verifying        : perl-Term-ANSIColor-4.06-396.el8.noarch                                                                                                           41/57
    Verifying        : perl-Term-Cap-1.17-395.el8.noarch                                                                                                                 42/57
    Verifying        : perl-Text-ParseWords-3.30-395.el8.noarch                                                                                                          43/57
    Verifying        : perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                                                                                                      44/57
    Verifying        : perl-Time-Local-1:1.280-1.el8.noarch                                                                                                              45/57
    Verifying        : perl-Unicode-Normalize-1.25-396.el8.x86_64                                                                                                        46/57
    Verifying        : perl-constant-1.33-396.el8.noarch                                                                                                                 47/57
    Verifying        : perl-interpreter-4:5.26.3-419.el8_4.1.x86_64                                                                                                      48/57
    Verifying        : perl-libs-4:5.26.3-419.el8_4.1.x86_64                                                                                                             49/57
    Verifying        : perl-macros-4:5.26.3-419.el8_4.1.x86_64                                                                                                           50/57
    Verifying        : perl-parent-1:0.237-1.el8.noarch                                                                                                                  51/57
    Verifying        : perl-podlators-4.11-1.el8.noarch                                                                                                                  52/57
    Verifying        : perl-threads-1:2.21-2.el8.x86_64                                                                                                                  53/57
    Verifying        : perl-threads-shared-1.58-2.el8.x86_64                                                                                                             54/57
    Verifying        : python3-setuptools-39.2.0-6.el8.noarch                                                                                                            55/57
    Verifying        : platform-python-pip-9.0.3-19.el8.noarch                                                                                                           56/57
    Verifying        : platform-python-pip-9.0.3-18.el8.noarch                                                                                                           57/57

  Upgraded:
    platform-python-pip-9.0.3-19.el8.noarch

  Installed:
    autoconf-2.69-27.el8.noarch                                    automake-1.16.1-7.el8.noarch                                   emacs-filesystem-1:26.1-5.el8.noarch
    git-2.27.0-1.el8.x86_64                                        git-core-2.27.0-1.el8.x86_64                                   git-core-doc-2.27.0-1.el8.noarch
    m4-1.4.18-7.el8.x86_64                                         perl-Carp-1.42-396.el8.noarch                                  perl-Data-Dumper-2.167-399.el8.x86_64
    perl-Digest-1.17-395.el8.noarch                                perl-Digest-MD5-2.55-396.el8.x86_64                            perl-Encode-4:2.97-3.el8.x86_64
    perl-Errno-1.28-419.el8_4.1.x86_64                             perl-Error-1:0.17025-2.el8.noarch                              perl-Exporter-5.72-396.el8.noarch
    perl-File-Path-2.15-2.el8.noarch                               perl-File-Temp-0.230.600-1.el8.noarch                          perl-Getopt-Long-1:2.50-4.el8.noarch
    perl-Git-2.27.0-1.el8.noarch                                   perl-HTTP-Tiny-0.074-1.el8.noarch                              perl-IO-1.38-419.el8_4.1.x86_64
    perl-IO-Socket-IP-0.39-5.el8.noarch                            perl-IO-Socket-SSL-2.066-4.module_el8.3.0+410+ff426aa3.noarch  perl-MIME-Base64-3.15-396.el8.x86_64
    perl-Mozilla-CA-20160104-7.module_el8.3.0+416+dee7bcef.noarch  perl-Net-SSLeay-1.88-1.module_el8.3.0+410+ff426aa3.x86_64      perl-PathTools-3.74-1.el8.x86_64
    perl-Pod-Escapes-1:1.07-395.el8.noarch                         perl-Pod-Perldoc-3.28-396.el8.noarch                           perl-Pod-Simple-1:3.35-395.el8.noarch
    perl-Pod-Usage-4:1.69-395.el8.noarch                           perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                     perl-Socket-4:2.027-3.el8.x86_64
    perl-Storable-1:3.11-3.el8.x86_64                              perl-Term-ANSIColor-4.06-396.el8.noarch                        perl-Term-Cap-1.17-395.el8.noarch
    perl-TermReadKey-2.37-7.el8.x86_64                             perl-Text-ParseWords-3.30-395.el8.noarch                       perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch
    perl-Thread-Queue-3.13-1.el8.noarch                            perl-Time-Local-1:1.280-1.el8.noarch                           perl-URI-1.73-3.el8.noarch
    perl-Unicode-Normalize-1.25-396.el8.x86_64                     perl-constant-1.33-396.el8.noarch                              perl-interpreter-4:5.26.3-419.el8_4.1.x86_64
    perl-libnet-3.11-3.el8.noarch                                  perl-libs-4:5.26.3-419.el8_4.1.x86_64                          perl-macros-4:5.26.3-419.el8_4.1.x86_64
    perl-parent-1:0.237-1.el8.noarch                               perl-podlators-4.11-1.el8.noarch                               perl-threads-1:2.21-2.el8.x86_64
    perl-threads-shared-1.58-2.el8.x86_64                          python3-pip-9.0.3-19.el8.noarch                                python3-setuptools-39.2.0-6.el8.noarch
    python36-3.6.8-2.module_el8.4.0+790+083e3d81.x86_64

  Complete!
  [root@localhost ~]# pip3 install pip --upgrade
  WARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.
  Collecting pip
    Downloading https://files.pythonhosted.org/packages/ca/31/b88ef447d595963c01060998cb329251648acf4a067721b0452c45527eb8/pip-21.2.4-py3-none-any.whl (1.6MB)
      100% |████████████████████████████████| 1.6MB 1.3MB/s
  Installing collected packages: pip
  Successfully installed pip-21.2.4
  [root@localhost ~]# pip3 install cf-remote cfbs
  WARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.
  Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.
  To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.
  Collecting cf-remote
    Downloading cf_remote-0.3.4-py3-none-any.whl (43 kB)
       |████████████████████████████████| 43 kB 1.2 MB/s
  Collecting cfbs
    Downloading cfbs-0.6.0-py3-none-any.whl (13 kB)
  Collecting apache-libcloud>=3.3.1
    Downloading apache_libcloud-3.3.1-py2.py3-none-any.whl (3.7 MB)
       |████████████████████████████████| 3.7 MB 6.4 MB/s
  Collecting cryptography>=3.4.4
    Downloading cryptography-3.4.8-cp36-abi3-manylinux_2_24_x86_64.whl (3.0 MB)
       |████████████████████████████████| 3.0 MB 7.4 MB/s
  Collecting fabric>=2.6.0
    Downloading fabric-2.6.0-py2.py3-none-any.whl (53 kB)
       |████████████████████████████████| 53 kB 2.3 MB/s
  Collecting requests>=2.25.1
    Downloading requests-2.26.0-py2.py3-none-any.whl (62 kB)
       |████████████████████████████████| 62 kB 1.8 MB/s
  Collecting paramiko>=2.7.2
    Downloading paramiko-2.7.2-py2.py3-none-any.whl (206 kB)
       |████████████████████████████████| 206 kB 4.9 MB/s
  Collecting cffi>=1.12
    Downloading cffi-1.14.6-cp36-cp36m-manylinux1_x86_64.whl (401 kB)
       |████████████████████████████████| 401 kB 4.4 MB/s
  Collecting pycparser
    Downloading pycparser-2.20-py2.py3-none-any.whl (112 kB)
       |████████████████████████████████| 112 kB 10.2 MB/s
  Collecting pathlib2
    Downloading pathlib2-2.3.6-py2.py3-none-any.whl (17 kB)
  Collecting invoke<2.0,>=1.3
    Downloading invoke-1.6.0-py3-none-any.whl (212 kB)
       |████████████████████████████████| 212 kB 9.2 MB/s
  Collecting pynacl>=1.0.1
    Downloading PyNaCl-1.4.0-cp35-abi3-manylinux1_x86_64.whl (961 kB)
       |████████████████████████████████| 961 kB 8.2 MB/s
  Collecting bcrypt>=3.1.3
    Downloading bcrypt-3.2.0-cp36-abi3-manylinux2010_x86_64.whl (63 kB)
       |████████████████████████████████| 63 kB 5.6 MB/s
  Requirement already satisfied: six>=1.4.1 in /usr/lib/python3.6/site-packages (from bcrypt>=3.1.3->paramiko>=2.7.2->cf-remote) (1.11.0)
  Collecting idna<4,>=2.5
    Downloading idna-3.2-py3-none-any.whl (59 kB)
       |████████████████████████████████| 59 kB 7.0 MB/s
  Collecting certifi>=2017.4.17
    Downloading certifi-2021.5.30-py2.py3-none-any.whl (145 kB)
       |████████████████████████████████| 145 kB 6.9 MB/s
  Collecting charset-normalizer~=2.0.0
    Downloading charset_normalizer-2.0.4-py3-none-any.whl (36 kB)
  Collecting urllib3<1.27,>=1.21.1
    Downloading urllib3-1.26.6-py2.py3-none-any.whl (138 kB)
       |████████████████████████████████| 138 kB 11.4 MB/s
  Installing collected packages: pycparser, cffi, urllib3, pynacl, idna, cryptography, charset-normalizer, certifi, bcrypt, requests, pathlib2, paramiko, invoke, fabric, apache-libcloud, cf-remote, cfbs
    WARNING: The script normalizer is installed in '/usr/local/bin' which is not on PATH.
    Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
    WARNING: The scripts inv and invoke are installed in '/usr/local/bin' which is not on PATH.
    Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
    WARNING: The script fab is installed in '/usr/local/bin' which is not on PATH.
    Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
    WARNING: The script cf-remote is installed in '/usr/local/bin' which is not on PATH.
    Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
    WARNING: The script cfbs is installed in '/usr/local/bin' which is not on PATH.
    Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
  Successfully installed apache-libcloud-3.3.1 bcrypt-3.2.0 certifi-2021.5.30 cf-remote-0.3.4 cfbs-0.6.0 cffi-1.14.6 charset-normalizer-2.0.4 cryptography-3.4.8 fabric-2.6.0 idna-3.2 invoke-1.6.0 paramiko-2.7.2 pathlib2-2.3.6 pycparser-2.20 pynacl-1.4.0 requests-2.26.0 urllib3-1.26.6
  WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
  [root@localhost ~]# export PATH=$PATH:/usr/local/bin/
  [root@localhost ~]# yum -y install $(cf-remote --version 3.18.0 list agent el8 | tail -n 1)
  Last metadata expiration check: 0:01:34 ago on Tue 14 Sep 2021 05:57:23 PM UTC.
  cfengine-nova-3.18.0-1.el8.x86_64.rpm                                                                                                        2.7 MB/s | 2.4 MB     00:00
  Dependencies resolved.
  =============================================================================================================================================================================
   Package                                    Architecture                        Version                                      Repository                                 Size
  =============================================================================================================================================================================
  Installing:
   cfengine-nova                              x86_64                              3.18.0-1.el8                                 @commandline                              2.4 M

  Transaction Summary
  =============================================================================================================================================================================
  Install  1 Package

  Total size: 2.4 M
  Installed size: 7.4 M
  Downloading Packages:
  Running transaction check
  Transaction check succeeded.
  Running transaction test
  Transaction test succeeded.
  Running transaction
    Preparing        :                                                                                                                                                     1/1
    Running scriptlet: cfengine-nova-3.18.0-1.el8.x86_64                                                                                                                   1/1
    Installing       : cfengine-nova-3.18.0-1.el8.x86_64                                                                                                                   1/1
    Running scriptlet: cfengine-nova-3.18.0-1.el8.x86_64                                                                                                                   1/1
    Verifying        : cfengine-nova-3.18.0-1.el8.x86_64                                                                                                                   1/1

  Installed:
    cfengine-nova-3.18.0-1.el8.x86_64

  Complete!

  [root@localhost ~]# mkdir masterfiles
  [root@localhost ~]# cd masterfiles
  [root@localhost masterfiles]# cfbs init
  Initialized - edit name and description cfbs.json
  To add your first module, type: cfbs add masterfiles
  [root@localhost masterfiles]# cfbs add masterfiles
  Added module: masterfiles
  [root@localhost masterfiles]# cfbs add migrate2rocky
  Added module: library-for-promise-types-in-python (Dependency of promise-type-git)
  Added module: promise-type-git (Dependency of migrate2rocky)
  Added module: migrate2rocky
  [root@localhost masterfiles]# cfbs build

  Modules:
  001 masterfiles                         @ c39b79c0e7a42522c69cff3d87a5bc5ac9471369 (Downloaded)
  002 library-for-promise-types-in-python @ da4abb182392f48047c4c082231ea08c955be580 (Downloaded)
  003 promise-type-git                    @ da4abb182392f48047c4c082231ea08c955be580 (Downloaded)
  004 migrate2rocky                       @ 2cede3f6c19ba425ea77be1514e3325dac2f501c (Downloaded)

  Steps:
  001 masterfiles                         : run './autogen.sh'
  001 masterfiles                         : delete './autogen.sh'
  001 masterfiles                         : copy './' 'masterfiles/'
  002 library-for-promise-types-in-python : copy 'cfengine.py' 'masterfiles/modules/promises/'
  003 promise-type-git                    : copy 'git.py' 'masterfiles/modules/promises/'
  003 promise-type-git                    : append 'enable.cf' 'masterfiles/services/init.cf'
  004 migrate2rocky                       : copy 'policy/main.cf' 'masterfiles/services/migrate2rocky/main.cf'
  004 migrate2rocky                       : json 'augments.json' 'masterfiles/def.json'

  Generating tarball...

  Build complete, ready to deploy 🐿
   -> Directory: out/masterfiles
   -> Tarball:   out/masterfiles.tgz

  To install on this machine: cfbs install
  To deploy on remote hub(s): cf-remote deploy --hub hub out/masterfiles.tgz

#+end_example
